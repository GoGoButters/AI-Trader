# AI-Trader Orchestrator

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º–∏ –±–æ—Ç–∞–º–∏ –Ω–∞ –±–∞–∑–µ Freqtrade —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ò–ò-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏**: –°–æ–∑–¥–∞–Ω–∏–µ, –∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ Web UI
- **–ò–ò-–∞–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Perplexica –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- **–ì—Ä–∞—Ñ–æ–≤–∞—è –ø–∞–º—è—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Graphiti –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –±–æ—Ç–∞–º–∏
- **–ì–∏–±—Ä–∏–¥–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: GraphitiHybridStrategy –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (RSI) —Å –ò–ò-–∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –Ω–æ–≤–æ—Å—Ç–µ–π
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π –±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
AI-Trader-Orchestrator/
‚îú‚îÄ‚îÄ config.yml                          # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ orchestrator/
‚îÇ   ‚îú‚îÄ‚îÄ backend/                        # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config_parser.py            # –ü–∞—Ä—Å–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py                   # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py                 # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docker_manager.py           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ graphiti_client.py          # –ö–ª–∏–µ–Ω—Ç Graphiti
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ perplexica_client.py        # –ö–ª–∏–µ–Ω—Ç Perplexica
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_client.py               # LLM –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ bots.py                 # API –¥–ª—è –±–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ui/                             # React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (TODO)
‚îÇ   ‚îî‚îÄ‚îÄ GraphitiHybridStrategy_template.py  # –®–∞–±–ª–æ–Ω —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚îî‚îÄ‚îÄ user_data/
    ‚îî‚îÄ‚îÄ strategies/                     # Freqtrade —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
        ‚îî‚îÄ‚îÄ GraphitiHybridStrategy.py   # –ò–ò-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ template)
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker & Docker Compose
- Python 3.11+
- –î–æ—Å—Ç—É–ø –∫ Perplexica (AI News Search)
- –î–æ—Å—Ç—É–ø –∫ Graphiti (Graph Memory)
- LLM API (OpenRouter –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏)

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.yml`:

```yaml
services:
  graphiti: "url: http://YOUR_SERVER:8000; token: YOUR_TOKEN"
  perplexica: "url: http://YOUR_SERVER:3001; api_key: YOUR_KEY"
  
models:
  primary_analysis: "model: MODEL_NAME; api_base: http://YOUR_SERVER:11434; api_key: YOUR_KEY"
  # ... –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±—ç–∫–µ–Ω–¥–∞
cd orchestrator/backend
pip install -r requirements.txt
```

### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ user_data
copy orchestrator\GraphitiHybridStrategy_template.py user_data\strategies\GraphitiHybridStrategy.py
```

### 4. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
cd orchestrator
docker-compose up -d
```

–ò–ª–∏ –∑–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞
cd orchestrator/backend
python main.py

# API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: http://localhost:8080/docs
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### API Endpoints

#### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

```bash
POST /api/bots/create
{
  "name": "btc-bot-1",
  "pair": "BTC/USDT",
  "timeframe": "15m",
  "mode": "demo",
  "params": {
    "rsi_period": 14,
    "rsi_oversold": 30,
    "rsi_overbought": 70,
    "stop_loss": -0.05,
    "take_profit": 0.10,
    "max_position_size": 100.0,
    "enable_ai_analysis": true,
    "news_check_interval": 3600,
    "min_impact_score": 0.3
  }
}
```

#### –°–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤

```bash
GET /api/bots/list
```

#### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
POST /api/bots/{bot_id}/start
```

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

```bash
POST /api/bots/{bot_id}/stop
```

#### –£–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–∞

```bash
DELETE /api/bots/{bot_id}
```

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç GraphitiHybridStrategy

1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä**: –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç RSI (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å)
2. **–ù–æ–≤–æ—Å—Ç–Ω–æ–π –∞–Ω–∞–ª–∏–∑**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Perplexica
3. **–ò–ò-–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è**: LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é –º–µ–∂–¥—É –Ω–æ–≤–æ—Å—Ç—è–º–∏, RSI –∏ –¥–≤–∏–∂–µ–Ω–∏–µ–º —Ü–µ–Ω—ã
4. **Impact Score**: –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∏—è–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π (0.0-1.0)
5. **Shared Memory**: –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Graphiti
6. **–ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–¥ —Å–¥–µ–ª–∫–æ–π –±–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Graphiti
7. **–§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –°–¥–µ–ª–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
   - RSI —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
   - Impact Score –≤—ã—à–µ –ø–æ—Ä–æ–≥–∞
   - Sentiment –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`orchestrator/data/orchestrator.db`)

–¢–∞–±–ª–∏—Ü—ã:

- `bot_instances` - –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –±–æ—Ç–æ–≤
- `bot_params` - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ—Ç–æ–≤
- `trading_signals` - –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

- **config_parser.py**: Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ `config.yml`
- **models.py**: SQLAlchemy –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **docker_manager.py**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- **graphiti_client.py**: Async –∫–ª–∏–µ–Ω—Ç –¥–ª—è Graphiti API
- **perplexica_client.py**: Async –∫–ª–∏–µ–Ω—Ç –¥–ª—è Perplexica API
- **llm_client.py**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π LLM –∫–ª–∏–µ–Ω—Ç —Å fallback
- **api/bots.py**: FastAPI –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

1. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config.yml`
2. –°–æ–∑–¥–∞–π—Ç–µ async –∫–ª–∏–µ–Ω—Ç (–ø—Ä–∏–º–µ—Ä: `graphiti_client.py`)
3. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–ª–∏ API

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –õ–æ–≥–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
docker logs orchestrator-api

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞
docker logs freqtrade-{bot_name}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Docker

```bash
docker ps -a | grep freqtrade
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í production –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CORS, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ HTTPS
2. **API –∫–ª—é—á–∏**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. **–†–µ–∂–∏–º Demo**: –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ demo-—Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ–π
4. **Graphiti**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Graphiti —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
5. **Perplexica**: –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ LLM –º–æ–¥–µ–ª–µ–π (Ollama –∏–ª–∏ OpenAI)

## üìù TODO

- [ ] React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (UI Dashboard)
- [ ] Auto-restart –±–æ—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- [ ] WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
- [ ] Backtesting –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Multi-exchange support

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ Freqtrade (GPLv3)

## ü§ù –í–∫–ª–∞–¥

–§–æ—Ä–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ Freqtrade: <https://github.com/freqtrade/freqtrade>

---

**–í–Ω–∏–º–∞–Ω–∏–µ**: –¢–æ—Ä–≥–æ–≤–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å –≤—ã—Å–æ–∫–∏–º–∏ —Ä–∏—Å–∫–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.
